import numpy as np
import cartpole_sqp_solver

true_weights = [0.0, -1.625, 0.0, 0.0, 0.375, 0.0, 0.0, -58.92, 0.0, 0.0, -0.375, -60.0, 0.6, 0.0, 0.0, -3.25, 0.0, 0.0, 0.0, 0.0, 0.75, -0.4, 0.0, 40.0, 7.365, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
true_weights = np.array(true_weights)

weights = np.array([  3.03802826e+00,   1.18043322e+00,   8.10109424e-01,
        -4.88073929e-01,  -1.18013893e+00,  -3.02297203e+00,
        -2.42441014e+01,   9.47570297e+01,  -7.37037274e+00,
        -4.68601086e+01,  -3.55909025e+00,   7.33274499e+00,
         2.46211743e+01,   6.30525928e+00,  -8.41626412e-01,
         9.54373508e+00,   3.42934357e+00,  -6.56533059e-01,
        -1.12297446e-01,  -3.48279828e+00,  -9.72986865e+00,
        -2.05647992e+00,   3.19664052e+02,  -4.19469819e+01,
        -1.59554250e+02,   3.74443658e+01,   4.23969512e+01,
         1.90501274e+00,  -7.55190324e+01,   5.95848247e-01,
        -6.51835405e+00,  -1.85869964e+00,  -6.43799794e-01,
        -3.22698788e+00,   2.01335911e+00,   6.81133641e+00,
        -1.02427992e+02,  -2.91356940e+02,   4.39305980e+01,
         1.50203603e+02,  -3.51942923e+01,  -4.36170239e+01,
         1.05957744e+02,   6.75646574e+01,   6.30519926e-01,
        -3.40211031e+01,  -5.74340547e+00,   2.49740357e-01,
         2.83997849e+00,   6.30068109e+00,   3.63443434e+01,
        -8.03598497e+00,  -6.26963339e+02,   3.47655480e+02,
         3.23864826e+02,  -3.79694918e+01,  -3.50992409e+02,
         3.70999666e+00,   6.84871118e+01,  -7.12666479e-01])


vc_max = 100

collocation_points = 15
nU = 1
pi = np.zeros([collocation_points - 1, nU], dtype=float)

start_state = [0,0,0,0]
start_state = np.array(start_state, dtype=float)

success, delta = cartpole_sqp_solver.solve(weights, pi, start_state, vc_max)

if success:
	print "Success!"
	print "Delta: {0}".format(delta)
else:
	print "Failure..."

print "Pi: ", pi